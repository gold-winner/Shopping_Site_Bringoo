<nz-card [nzTitle]="titleTemplate" [nzExtra]="extraTemplate" style="width:300px;">
  <div class="item-info">
    <ng-container *ngIf="keyPoint.order as order">
      <div class="d-flex justify-content-between">
        <span>Status:</span>
        <span>{{order.orderStatus}}</span>
      </div>
      <div class="d-flex justify-content-between">
        <span>Driver Assigned:</span>
        <a
          *ngIf="keyPoint.driver; else empty"
          routerLink="/users/staff/details/{{keyPoint.driver.id}}"
          target="_blank"
        >
          {{keyPoint.driver.firstName}} {{keyPoint.driver.lastName}}
        </a>
      </div>

      <div class="d-flex justify-content-between">
        <span>Picker Assigned:</span>
        <a
          *ngIf="keyPoint.picker; else empty"
          routerLink="/users/staff/details/{{keyPoint.picker.id}}"
          target="_blank"
        >
          {{keyPoint.picker.firstName}} {{keyPoint.picker.lastName}}
        </a>
      </div>

      <div class="d-flex justify-content-between">
        <span>Delivery Date:</span>
        <span>{{order.deliveryDateTime|date :dateTimeFormat}}</span>
      </div>

      <div class="d-flex justify-content-between">
        <span>Distance to Store:</span>
        <span>{{order.deliveryDistance|formatDistance}}</span>
      </div>
    </ng-container>

    <ng-container *ngIf="keyPoint.store as store">
      <div class="d-flex justify-content-between">
        <span>Store Name:</span>
        <a routerLink="/store/stores/{{store.id}}/basic-information" target="_blank">{{store.name_i18n}}</a>
      </div>
    </ng-container>

    <div class="d-flex justify-content-between">
      <span>Point type:</span>
      <span>{{keyPoint.pointType|titlecase}}</span>
    </div>
  </div>
  <div class="ant-modal-footer ng-tns-c251-72 ng-star-inserted mx--6 mb--6 mt-4">
    <button
      nz-button
      nzDanger
      (click)="onDelete.emit()"
    >Delete</button>
    <button
      nz-button
      nzType="primary"
      (click)="onEdit.emit()"
    >Edit</button>
  </div>
</nz-card>

<ng-template #empty><span>---</span></ng-template>

<ng-template #titleTemplate>
  <span class="index p-1 px-2 mr-2 ml--4 f-4 border-round-sm">{{index}}</span>
  <a *ngIf="keyPoint.order as order" routerLink="/orders/all/detail/{{order.id}}" target="_blank">{{order.orderNumber}}</a>
</ng-template>

<ng-template #extraTemplate>
  <button
    class='mr--4'
    nz-button
    nzType="text"
    nzSize="small"
    (click)="onClose.emit()"
  ><i nz-icon nzType="close" nzTheme="outline"></i></button>
</ng-template>